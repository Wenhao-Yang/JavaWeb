<!DOCTYPE html>
<html>
  <head>
    <title>主页</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8" />

    <link rel="icon" type="image/ico" href="http://tattek.com/minimal/assets/images/favicon.ico" />
    <!-- Bootstrap -->
    <link href="assets/css/vendor/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/vendor/animate/animate.min.css">
    <link type="text/css" rel="stylesheet" media="all" href="assets/js/vendor/mmenu/css/jquery.mmenu.all.css" />
    <link rel="stylesheet" href="assets/js/vendor/videobackground/css/jquery.videobackground.css">
    <link rel="stylesheet" href="assets/css/vendor/bootstrap-checkbox.css">

    <link rel="stylesheet" href="assets/js/vendor/rickshaw/css/rickshaw.min.css">
    <link rel="stylesheet" href="assets/js/vendor/morris/css/morris.css">
    <link rel="stylesheet" href="assets/js/vendor/tabdrop/css/tabdrop.css">
    <link rel="stylesheet" href="assets/js/vendor/summernote/css/summernote.css">
    <link rel="stylesheet" href="assets/js/vendor/summernote/css/summernote-bs3.css">
    <link rel="stylesheet" href="assets/js/vendor/chosen/css/chosen.min.css">
    <link rel="stylesheet" href="assets/js/vendor/chosen/css/chosen-bootstrap.css">

    <link href="assets/css/minimal.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <script>
        var _hmt = _hmt || [];
        _hmt.push(['_setAccount', '10811109']);
    </script>
    
  </head>
  <body class="bg-1">

    <!-- Preloader -->
    <div class="mask"><div id="loader"></div></div>
    <!--/Preloader -->

    <!-- Wrap all page content here -->
    <div id="wrap">

      <!-- Make page fluid -->
      <div class="row">
        
        <!-- Fixed navbar -->
        <div class="navbar navbar-default navbar-fixed-top navbar-transparent-black mm-fixed-top" role="navigation" id="navbar">
          
          <!-- Branding -->
          <div class="navbar-header col-md-2">
            <a class="navbar-brand" href="index.html">
              <strong>Stocks</strong>
            </a>
            <div class="sidebar-collapse">
              <a href="#">
                <i class="fa fa-bars"></i>
              </a>
            </div>
          </div>
          
          <!-- .nav-collapse -->
          <div class="navbar-collapse">
                        
            <!-- Page refresh -->
            <ul class="nav navbar-nav refresh">
              <li class="divided">
                <a href="#" class="page-refresh"><i class="fa fa-refresh"></i></a>
              </li>
            </ul>
            <!-- /Page refresh -->
            <!-- Search -->
            <div class="search" id="main-search">
              <i class="fa fa-search"></i> <input type="text" placeholder="Search...">
            </div>
            <!-- Search end -->

            <!-- Quick Actions -->
            <ul class="nav navbar-nav quick-actions">

              <li class="dropdown divided user" id="current-user">
                <div class="profile-photo">
                  <img src="assets/images/profile-photo1.jpeg" alt />
                </div>
                <a class="dropdown-toggle options" data-toggle="dropdown" id="showname">
                  <i class="fa fa-caret-down"></i>
                </a>
                
                <ul class="dropdown-menu arrow settings">

                  <li>
                    
                    <h3>Backgrounds:</h3>
                    <ul id="color-schemes">
                      <li><a href="#" class="bg-1"></a></li>
                      <li><a href="#" class="bg-2"></a></li>
                      <li><a href="#" class="bg-3"></a></li>
                      <li><a href="#" class="bg-4"></a></li>
                      <li><a href="#" class="bg-5"></a></li>
                      <li><a href="#" class="bg-6"></a></li>
                    </ul>

                    <div class="form-group videobg-check">
                      <label class="col-xs-8 control-label">Video BG</label>
                      <div class="col-xs-4 control-label">
                        <div class="onoffswitch greensea small">
                          <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="videobg-check">
                          <label class="onoffswitch-label" for="videobg-check">
                            <span class="onoffswitch-inner"></span>
                            <span class="onoffswitch-switch"></span>
                          </label>
                        </div>
                      </div>
                    </div>

                  </li>

                  <li class="divider"></li>

                  <li>
                    <a href="#"><i class="fa fa-user"></i> Profile</a>
                  </li>

                  <li>
                    <a href="#"><i class="fa fa-calendar"></i> Calendar</a>
                  </li>

                 

                  <li class="divider"></li>

                  <li>
                    <a href="javascript:Logout();"><i class="fa fa-power-off"></i> Logout</a>
                  </li>
                </ul>
              </li>
            </ul>
            <!-- /Quick Actions -->
            <!-- Sidebar -->
            <ul class="nav navbar-nav side-nav" id="sidebar">
              
              <li class="collapsed-content"> 
                <ul>
                  <li class="search"><!-- Collapsed search pasting here at 768px --></li>
                </ul>
              </li>

              <li class="navigation" id="navigation">
                <a href="#" class="sidebar-toggle" data-toggle="#navigation">管理平台 <i class="fa fa-angle-up"></i></a>
                
                <ul class="menu">
                  
                  <li class="active">
                    <a href="index.html">
                      <i class="fa fa-tachometer"></i> 首页
                      <span class="badge badge-red">1</span>
                    </a>
                  </li>

                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                      <i class="fa fa-th-large"></i> 信息查看 <b class="fa fa-plus dropdown-plus"></b>
                    </a>
                    <ul class="dropdown-menu">
                      <li>
                        <a href="tables.html">
                          <i class="fa fa-caret-right"></i> 用户信息
                        </a>
                      </li>
                      <li>
                        <a href="datatables.html">
                          <i class="fa fa-caret-right"></i> 交易数据
                        </a>
                      </li>
                    </ul>
                  </li>
                </ul>

              </li>

              <li class="summary" id="order-summary">
                <a href="#" class="sidebar-toggle underline" data-toggle="#order-summary">网站数据查看 <i class="fa fa-angle-up"></i></a>

                <div class="media">
                  <a class="pull-right" href="#">
                    <span id="sales-chart"></span>
                  </a>
                  <div class="media-body">
                                                    本周交易量
                    <h3 class="media-heading" id="weeksellnum"> 111</h3>
                  </div>
                </div>

                <div class="media">
                  <a class="pull-right" href="#">
                    <span id="balance-chart"></span>
                  </a>
                  <div class="media-body">
                                                    本周访问量
                    <h3 class="media-heading" id="weekvisitnum">111</h3>
                  </div>
                </div>

              </li> 
            </ul>
            <!-- Sidebar end -->


          </div>
          <!--/.nav-collapse -->

        </div>
        <!-- Fixed navbar end -->
             
        <!-- Page content -->
        <div id="content" class="col-md-12">

          <!-- page header -->
          <div class="pageheader">
            

            <h2><i class="fa fa-tachometer"></i> 首页
            <span></span></h2>
            

            <div class="breadcrumbs">
              <ol class="breadcrumb">
                <li>您在这:</li>
                <li><a href="index.html">管理平台</a></li>
                <li class="active">主页</li>
              </ol>
            </div>


          </div>
          <!-- /page header -->
          
         <!-- content main container -->
          <div class="main">


            <!-- cards -->
            <div class="row cards">
              
              <div class="card-container col-lg-3 col-sm-6 col-sm-12">
                <div class="card card-redbrown hover">
                  <div class="front"> 

                    <div class="media">        
                      <span class="pull-left">
                        <i class="fa fa-users media-object"></i>
                      </span>

                      <div class="media-body">
                        <small>新用户</small>
                        <h2 class="media-heading animate-number" id="newuser1" data-animation-duration="1500">0</h2>
                      </div>
                    </div> 

                    <div class="progress-list">
                      <div class="details">
                        <div class="title">今天用户增加量</div>
                      </div>
                      <div class="status pull-right bg-transparent-black-1">
                        <span class="animate-number" id="newuser2"  data-animation-duration="1500">0</span>%
                      </div>
                      <div class="clearfix"></div>
                      <div class="progress progress-little progress-transparent-black">
                        <div class="progress-bar animate-progress-bar" data-percentage="0%"></div>
                      </div>
                    </div>

                  </div>
                  <div class="back">
                    <a href="tables.html">
                      <i class="fa fa-bar-chart-o fa-4x"></i>
                      <span>查看详情</span>
                    </a>  
                  </div>
                </div>
              </div>


              <div class="card-container col-lg-3 col-sm-6 col-sm-12">
                <div class="card card-blue hover">
                  <div class="front">        
                    
                    <div class="media">                  
                      <span class="pull-left">
                        <i class="fa fa-shopping-cart media-object"></i>
                      </span>

                      <div class="media-body">
                        <small>新购买订单</small>
                        <h2 class="media-heading animate-number" id="newbill1" data-animation-duration="1500">0</h2>
                      </div>
                    </div> 

                    <div class="progress-list">
                      <div class="details">
                        <div class="title">今天购买量</div>
                      </div>
                      <div class="status pull-right bg-transparent-black-1">
                        <span class="animate-number" id="newbill2" data-animation-duration="1500">0</span>%
                      </div>
                      <div class="clearfix"></div>
                      <div class="progress progress-little progress-transparent-black">
                        <div class="progress-bar animate-progress-bar" data-percentage="100%"></div>
                      </div>
                    </div>

                  </div>
                  <div class="back">
                    <a href="datatables.html">
                      <i class="fa fa-bar-chart-o fa-4x"></i>
                      <span>查看详情</span>
                    </a>
                  </div>
                </div>
              </div>

              <div class="card-container col-lg-3 col-sm-6 col-sm-12">
                <div class="card card-greensea hover">
                  <div class="front">        
                    
                    <div class="media">
                      <span class="pull-left">
                        <i class="fa fa-usd media-object"></i>
                      </span>

                      <div class="media-body">
                        <small>新出售订单</small>
                        <h2 class="media-heading animate-number" id="newhisbill1" data-animation-duration="1500">0</h2>
                      </div>
                    </div>

                    <div class="progress-list">
                      <div class="details">
                        <div class="title">今天出售量</div>
                      </div>
                      <div class="status pull-right bg-transparent-black-1">
                        <span class="animate-number" id="newhisbill2" data-animation-duration="1500">0</span>%
                      </div>
                      <div class="clearfix"></div>
                      <div class="progress progress-little progress-transparent-black">
                        <div class="progress-bar animate-progress-bar" data-percentage="0%"></div>
                      </div>
                    </div>

                  </div>
                  <div class="back">
                    <a href="datatables.html">
                      <i class="fa fa-bar-chart-o fa-4x"></i>
                      <span>查看详情</span>
                    </a>
                  </div>
                </div>
              </div>


              <div class="card-container col-lg-3 col-sm-6 col-xs-12">
                <div class="card card-slategray hover">
                  <div class="front"> 

                    <div class="media">                   
                      <span class="pull-left">
                        <i class="fa fa-eye media-object"></i>
                      </span>

                      <div class="media-body">
                        <small>访问量</small>
                        <h2 class="media-heading animate-number" id="visittoday1"  data-animation-duration="1500">0</h2>
                      </div>
                    </div> 

                    <div class="progress-list">
                      <div class="details">
                        <div class="title">今日访问量</div>
                      </div>
                      <div class="status pull-right bg-transparent-black-1">
                        <span class="animate-number"  id="visittoday2"data-animation-duration="1500">0</span>%
                      </div>
                      <div class="clearfix"></div>
                      <div class="progress progress-little progress-transparent-black">
                        <div class="progress-bar animate-progress-bar" data-percentage="100%"></div>
                      </div>
                    </div>

                  </div>
                  <div class="back">
                    <a href="https://tongji.baidu.com/web/welcome/login">
                      <i class="fa fa-bar-chart-o fa-4x"></i>
                      <span>查看详情</span>
                    </a>
                  </div>
                </div>
              </div>


            </div>
            <!-- /cards -->
            
            


            <!-- row -->
            <div class="row">


              <!-- col 8 -->
              <div class="col-lg-8 col-md-12">




                <!-- tile -->
                <section class="tile transparent">




                  <!-- tile header -->
                  <div class="tile-header color transparent-black textured rounded-top-corners">
                    <h1><strong>用户访问数</strong> 交易数</h1>
                    <div class="controls">
                      <a href="#" class="refresh"><i class="fa fa-refresh"></i></a>
                      <a href="#" class="remove"><i class="fa fa-times"></i></a>
                    </div>
                  </div>
                  <!-- /tile header -->


                  <!-- tile widget -->
                  <div class="tile-widget color transparent-black textured">
                    <div id="statistics-chart" class="chart statistics" style="height: 250px;"></div>
                  </div>
                  <!-- /tile widget -->


                 



                </section>
                <!-- /tile -->



                <!-- tile -->
                <section class="tile color transparent-black">




                  <!-- tile header -->
                  <div class="tile-header">
                    <h1><strong>盈利</strong> Top10</h1>
                    <div class="search">
                      <input type="text" placeholder="Search...">
                    </div>
                    <div class="controls">
                      <a href="#" class="refresh"><i class="fa fa-refresh"></i></a>
                      <a href="#" class="remove"><i class="fa fa-times"></i></a>
                    </div>
                  </div>
                  <!-- /tile header -->


                  <!-- tile body -->
                  <div class="tile-body no-vpadding">
                    <div class="table-responsive">
                      <table class="table table-custom table-sortable nomargin" 
                            data-url="../usert/successUser.action"  
				       		data-page-list="[5, 10, 15]"
				       		data-toggle="table"
				       		data-pagination="true" 
					   		data-click-to-select="true"	
				        	data-side-pagination="client">
                        <thead>
                          <tr>
                            <th class="sortable sort-numeric sort-asc" data-field="id" data-sortable="true">ID</th>
                            <th class="sortable sort-alpha" data-field="uname"> 用户名</th>
                            <th class="sortable" data-field="total" data-sortable="true">交易数</th>
                            <th class="sortable sort-amount" data-field="roit" data-sortable="true">盈利比例</th>
                            
                          </tr>
                        </thead>
                      
                      </table>
                    </div>
                  </div>
                  <!-- /tile body -->

                </section>
                <!-- /tile -->


              </div>
              <!-- /col 8 -->



              <!-- col 4 -->
              <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12">
                <!-- tile -->
                <section class="tile color transparent-black textured">
                  <!-- tile header -->
                  <div class="tile-header">
                    <h1><strong>服务器</strong> 负载</h1>
                    <div class="controls">
                      <a href="#" class="refresh"><i class="fa fa-refresh"></i></a>
                      <a href="#" class="remove"><i class="fa fa-times"></i></a>
                    </div>
                  </div>
                  <!-- /tile header -->

                  <!-- tile widget -->
                  <div class="tile-widget">

                    <div class="progress-list with-heading">
                      <div class="details">
                        <div class="title"><h2><i class="fa fa-hdd-o"></i> <span class="animate-number" data-value="2" data-animation-duration="1600">0</span> GB</h2></div>
                      </div>
                      <div class="status pull-right bg-transparent-black-1">
                        <span class="animate-number" data-value="24" data-animation-duration="1500">0</span>%
                      </div>
                      <div class="clearfix"></div>
                      <div class="progress progress-little progress-transparent-black" style="margin-bottom: 5px">
                        <div class="progress-bar animate-progress-bar" data-percentage="24%"></div>
                      </div>
                    </div>  
                    <p class="description"><strong>483MB</strong> used of <strong class="white-text">2GB</strong> on Server</p>
                  </div>
                  <!-- /tile widget -->


                  <!-- tile body -->
                  <div class="tile-body paddingtop">
                    <div id="serverload-chart"></div>
                  </div>
                  <!-- /tile body -->
                </section>
                <!-- /tile -->
     
                <!-- tile -->
                <section class="tile color transparent-black">



                  <!-- tile header -->
                  <div class="tile-header">
                    <h1><strong>交易</strong> 盈亏比</h1>
                    <div class="controls">
                      <a href="#" class="refresh"><i class="fa fa-refresh"></i></a>
                      <a href="#" class="remove"><i class="fa fa-times"></i></a>
                    </div>
                  </div>
                  <!-- /tile header -->

                  <!-- tile body -->
                  <div class="tile-body">
                    <div id="browser-usage" style="height: 230px;" class="morris-chart"></div>
                    <ul class="inline text-center chart-legend">
                      <li><span class="badge badge-outline" style="border-color: #ff0000"></span> 盈 <p id="profit">50%</p></li>
                      <li><span class="badge badge-outline" style="border-color: #76EE00"></span> 亏 <p id="loss">50%</p></li>
                    </ul>
                  </div>
                  <!-- /tile body --> 




                </section>
                <!-- /tile -->



                <!-- tile -->
                <section class="tile transparent">




                  <!-- tile header -->
                  <div class="tile-header color redbrown rounded-top-corners text-center">               
                    <button class="btn pull-left btn-black-transparent" type="button"><i class="fa fa-caret-square-o-down"></i></button>
                    <h2><strong>Todo</strong> List</h2>
                    <div class="controls">
                      <a href="#" class="refresh"><i class="fa fa-refresh"></i></a>
                      <a href="#" class="remove"><i class="fa fa-times"></i></a>
                    </div>
                  </div>
                  <!-- /tile header -->

                  <!-- tile body -->
                  <div class="tile-body color transparent-black rounded-bottom-corners">
                    <input type="text" placeholder="Add new todo..." class="w100p bottommargin">
                    <ul class="nolisttypes" id="todolist">
                      <li>
                        <div class="checkbox check-transparent">
                          <input type="checkbox" value="1" id="todo-01">
                          <label for="todo-01">Make a backup</label>
                        </div>
                      </li>
                      <li>
                        <div class="checkbox check-transparent">
                          <input type="checkbox" checked="checked" value="1" id="todo-02">
                          <label for="todo-02" class="done">Send e-mail to Ici</label>
                        </div>
                      </li>
                      <li>
                        <div class="checkbox check-transparent">
                          <input type="checkbox" value="1" id="todo-03">
                          <label for="todo-03">Buy tickets</label>
                        </div>
                      </li>
                      <li>
                        <div class="checkbox check-transparent">
                          <input type="checkbox" value="1" id="todo-04">
                          <label for="todo-04">Resolve issues</label>
                        </div>
                      </li>
                      <li>
                        <div class="checkbox check-transparent">
                          <input type="checkbox" value="1" id="todo-05">
                          <label for="todo-05">Compile new version</label>
                        </div>
                      </li>
                      <li>
                        <div class="checkbox check-transparent">
                          <input type="checkbox" value="1" id="todo-06">
                          <label for="todo-06">Upload new version</label>
                        </div>
                      </li>
                    </ul>
                  </div>
                  <!-- /tile body -->

                </section>
                <!-- /tile -->

              </div>
              <!-- /col 4 -->      
            </div>
            <!-- /row -->


          </div>
          <!-- /content container -->

        </div>
        <!-- Page content end -->

      </div>
      <!-- Make page fluid-->

    </div>
    <!-- Wrap all page content end -->

    <section class="videocontent" id="video"></section>
    <!--dynamic table-->
	<!-- Placed js at the end of the document so the pages load faster -->
	<script src="js/jquery.js" ></script>
	<script src="js/jquery-1.10.2.min.js"></script>
	<script src="js/jquery-ui-1.9.2.custom.min.js"></script>
	<script src="js/jquery-migrate-1.2.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/modernizr.min.js"></script>
	<script src="js/jquery.nicescroll.js"></script>
	<script src="js/bootstrap-table.js"></script>  
	<script src="js/bootstrap-table-export.js"></script>
	<script src="js/bootstrap-table-zh-CN.js"></script>
	<script src="js/tableExport.js"></script>
	
	<!--dynamic table-->


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="assets/js/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="assets/js/vendor/bootstrap/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/js/vendor/mmenu/js/jquery.mmenu.min.js"></script>
    <script type="text/javascript" src="assets/js/vendor/sparkline/jquery.sparkline.min.js"></script>
    <script type="text/javascript" src="assets/js/vendor/nicescroll/jquery.nicescroll.min.js"></script>
    <script type="text/javascript" src="assets/js/vendor/animate-numbers/jquery.animateNumbers.js"></script>
    <script type="text/javascript" src="assets/js/vendor/videobackground/jquery.videobackground.js"></script>
    <script type="text/javascript" src="assets/js/vendor/blockui/jquery.blockUI.js"></script>

    <script src="assets/js/vendor/flot/jquery.flot.min.js"></script>
    <script src="assets/js/vendor/flot/jquery.flot.time.min.js"></script>
    <script src="assets/js/vendor/flot/jquery.flot.selection.min.js"></script>
    <script src="assets/js/vendor/flot/jquery.flot.animator.min.js"></script>
    <script src="assets/js/vendor/flot/jquery.flot.orderBars.js"></script>
    <script src="assets/js/vendor/easypiechart/jquery.easypiechart.min.js"></script>

    <script src="assets/js/vendor/rickshaw/raphael-min.js"></script> 
    <script src="assets/js/vendor/rickshaw/d3.v2.js"></script>
    <script src="assets/js/vendor/rickshaw/rickshaw.min.js"></script>

    <script src="assets/js/vendor/morris/morris.min.js"></script>

    <script src="assets/js/vendor/tabdrop/bootstrap-tabdrop.min.js"></script>

    <script src="assets/js/vendor/summernote/summernote.min.js"></script>

    <script src="assets/js/vendor/chosen/chosen.jquery.min.js"></script>

    <script src="assets/js/minimal.min.js"></script>
	<script type="text/javascript">
	$(document).ready(function(){
		//判断是否是html5机制浏览器来不同方式读取浏览器缓存                                                    usermsg                 usermsg
		var str= window.localStorage?localStorage.getItem("usermsg"):Cookie.read("usermsg");
		if(str!=null)
		{
			alert("Welcome:   "+str);
			str = "Welcome:   "+str;
			$("#showname").html(str);	
		}else{
			alert("请先登录");
			location.href="index.html";
		}
		
	});
	function Logout()
	{
		localStorage.removeItem("usermsg");
		//alert(localStorage.getItem("userid"));
		location.href="index.html";
		changeonline(localStorage.getItem("userid"));
	}
	function changeonline(uid)
    {
    	$.ajax({
            url:"../usert/changeonline.action",
            method: "POST",
            data: {"uid":uid},
            dataType: "json",
            success:function(data){
            	alert("已注销，请重新登录！");
            	return true;
            }
            });
    }
	</script>
    <script>
    $(function(){
    	//今日新用户量
    	function getNowFormatDate() {
              var date = new Date();
              var seperator1 = "-";
              var seperator2 = ":";
              var month = date.getMonth() + 1;
              var strDate = date.getDate();
              if (month >= 1 && month <= 9) {
                 month = "0" + month;
               }
              if (strDate >= 0 && strDate <= 9) {
                    strDate = "0" + strDate;
              }
              var currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate
                                  + " " + date.getHours() + seperator2 + date.getMinutes()
                      + seperator2 + date.getSeconds();
              return currentdate;
        }
    	console.log(_hmt.push(['_trackPageview','10811109']));
    	$.ajax({
            type:"POST",
            url:"../usert/searchUser.action",
            data:{},
            datatype: "json",
            success:function(data){
            	//console.log(data);
            	var newuser=0;
            	var totaluser = 0;
            	for(var o in data)
            	{
            		var date = data[o].date;
            		var stime = new Date(date);
            		var nowday = getNowFormatDate();
            		var etime = new Date(nowday);
            		if(date.substring(0,10)==nowday.substring(0,10))
            		{
            			newuser=newuser+1;
            			
            		}
            		totaluser=totaluser+1;
            		//console.log(newuser);
            		//console.log(date.substring(0,10));
            		//console.log(nowday.substring(0,10));
            		//console.log(etime.getDay());
            		
            	}
            	var x = document.getElementById("newuser1");
            	var y = document.getElementById("newuser2");
            	x.setAttribute("data-value", newuser);
            	x.innerHTML = newuser;
            	y.innerHTML = (newuser/totaluser*100).toFixed(2);
            } ,
            error: function(){
                
            }         
       });
    	//今日新购买订单
    	$.ajax({
            type:"POST",
            url:"../stockt/searchAllbill.action",
            data:{},
            datatype: "json",
            success:function(data){
            	
            	var newbill = 0;
            	var totalbill = 0;
            	for(var o in data)
            	{
            		var date = data[o].date;
            		var nowday = getNowFormatDate();
            		if(date.substring(0,10)==nowday.substring(0,10))
            		{
            			newbill=newbill+1;
            			
            		}
            		totalbill=totalbill+1;
            	}
            	//console.log(newbill);
            	//console.log(totalbill);
            	var x = document.getElementById("newbill1");
            	var y = document.getElementById("newbill2");
            	x.setAttribute("data-value", newbill);
            	y.setAttribute("data-value", (newbill/totalbill*100).toFixed(2));
            	x.innerHTML = newbill;
            	y.innerHTML = (newbill/totalbill*100).toFixed(2);
            } ,
            error: function(){
                
            }         
       });
    	//今日新出售订单
    	$.ajax({
            type:"POST",
            url:"../stockt/searchHisstock.action",
            data:{},
            datatype: "json",
            success:function(data){
            	//console.log(data);
            	var newbill = 0;
            	var totalbill = 0;
            	for(var o in data)
            	{
            		var date = data[o].sdate;
            		var nowday = getNowFormatDate();
            		if(date.substring(0,10)==nowday.substring(0,10))
            		{
            			newbill=newbill+1;
            			
            		}
            		totalbill=totalbill+1;
            	}
            	//console.log(newbill);
            	///console.log(totalbill);
            	var x = document.getElementById("newhisbill1");
            	var y = document.getElementById("newhisbill2");
            	x.setAttribute("data-value", newbill);
            	y.setAttribute("data-value", (newbill/totalbill*100).toFixed(2));
            	x.innerHTML = newbill;
            	y.innerHTML = (newbill/totalbill*100).toFixed(2);
            } ,
            error: function(){
                
            }         
       });
    	//今日访问量
    	$.ajax({
             type: "GET",
             url: "http://101.200.36.178/tongji/demo.php",
             dataType: "text",
             success: function(data){
                        //console.log(data);
                       var str = data.split('----------------------get data----------------------');
                        
                       var str1 =str[1].split("\"sum\":[[");
                        //console.log(str1);
                       var str2 = str1[1].split(",");
                       console.log(str2[0]);
                       var x = document.getElementById("visittoday1");
                    var y = document.getElementById("visittoday2");
                   	x.setAttribute("data-value", str2[0]);
                   	y.setAttribute("data-value", str2[0]);
                   	x.innerHTML = str2[0];
                   	y.innerHTML = str2[0];
             },

             });
      // Initialize card flip
      $('.card.hover').hover(function(){
        $(this).addClass('flip');
      },function(){
        $(this).removeClass('flip');
      });
      
      // 用户访问数与交易量
      function getd1()
      {
    	  var d2 =[ [1, 6],
                    [2, 16],
                    [3, 0],
                    [4, 0],
                    [5, 0],
                    [6, 0],
                    [7, 0],
                    
          ];
    	  return d2;
      }
      //console.log(getd2());
      function getd2()
      {
    	  var d1=0;
    	  $.ajax({
              type:"POST",
              url:"../stockt/searchWeekstock.action",
              data:{},
              async: false,  
              datatype: "json",
              success:function(data){
            	 
                  d1 =[ [1, data[0]],
            	        [2, data[1]],
            	        [3, data[2]],
            	        [4, data[3]],
            	        [5, data[4]],
            	        [6, data[5]],
            	        [7, data[6]]];
                  var total = data[0]+data[1]+data[2]+data[3]+data[4]+data[5]+data[6];
                  var x= document.getElementById("weeksellnum");
                  x.innerHTML = total;
              } ,
              error: function(){
                  
              }         
         });
    	 return d1;
      }
      console.log(getd1());
      var months = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];

      // flot chart generate
      var plot = $.plotAnimator($("#statistics-chart"), 
        [
          {
            label: '访问量', 
            data: getd1(),    
            lines: {lineWidth:3}, 
            shadowSize:0,
            color: '#ffffff'
          },
          { label: "成交量",
            data: getd2(), 
            animator: {steps: 99, duration: 500, start:200, direction: "right"},   
            lines: {        
              fill: .15,
              lineWidth: 0
            },
            color:['#ffffff']
          },{
            label: '访问量',
            data: getd1(), 
            points: { show: true, fill: true, radius:6,fillColor:"rgba(0,0,0,.5)",lineWidth:2 }, 
            color: '#fff',        
            shadowSize:0
          },
          { label: "成交量",
            data: getd2(), 
            points: { show: true, fill: true, radius:6,fillColor:"rgba(255,255,255,.2)",lineWidth:2 }, 
            color: '#fff',        
            shadowSize:0
          }
        ],{ 
        
        xaxis: {

          tickLength: 0,
          tickDecimals: 0,
          min:1,
          ticks: [[1,"Mon"], [2, "Thes"], [3, "Wed"], [4, "Thur"], [5, "Fri"], [6, "Sat"], [7, "Sun"]],

          font :{
            lineHeight: 24,
            weight: "300",
            color: "#ffffff",
            size: 14
          }
        },
        
        yaxis: {
          ticks: 4,
          tickDecimals: 0,
          tickColor: "rgba(255,255,255,.3)",

          font :{
            lineHeight: 13,
            weight: "300",
            color: "#ffffff"
          }
        },
        
        grid: {
          borderWidth: {
            top: 0,
            right: 0,
            bottom: 1,
            left: 1
          },
          borderColor: 'rgba(255,255,255,.3)',
          margin:0,
          minBorderMargin:0,              
          labelMargin:20,
          hoverable: true,
          clickable: true,
          mouseActiveRadius:6
        },
        
        legend: { show: false}
      });

      

      // tooltips showing
      $("#statistics-chart").bind("plothover", function (event, pos, item) {
        if (item) {
          var x = item.datapoint[0],
              y = item.datapoint[1];

          $("#tooltip").html('<h1 style="color: #418bca">' + months[x - 1] + '</h1>' + '<strong>' + y + '</strong>' + ' ' + item.series.label)
            .css({top: item.pageY-30, left: item.pageX+5})
            .fadeIn(200);
        } else {
          $("#tooltip").hide();
        }
      });

      
      //tooltips options
      $("<div id='tooltip'></div>").css({
        position: "absolute",
        //display: "none",
        padding: "10px 20px",
        "background-color": "#ffffff",
        "z-index":"99999"
      }).appendTo("body");

      //generate actual pie charts
      $('.pie-chart').easyPieChart();


      //server load rickshaw chart
      var graph;

      var seriesData = [ [], []];
      var random = new Rickshaw.Fixtures.RandomData(50);

      for (var i = 0; i < 50; i++) {
        random.addData(seriesData);
      }

      graph = new Rickshaw.Graph( {
        element: document.querySelector("#serverload-chart"),
        height: 150,
        renderer: 'area',
        series: [
          {
            data: seriesData[0],
            color: '#6e6e6e',
            name:'File Server'
          },{
            data: seriesData[1],
            color: '#fff',
            name:'Mail Server'
          }
        ]
      } );

      var hoverDetail = new Rickshaw.Graph.HoverDetail( {
        graph: graph,
      });

      setInterval( function() {
        random.removeData(seriesData);
        random.addData(seriesData);
        graph.update();

      },1000);
      
      // Morris donut chart
      $.ajax({
            type:"POST",
            url:"../usert/successUser.action",
            data:{},
            datatype: "json",
            success:function(data){
            	var pro = 0;
            	var lo = 0;
            	for(var o in data){  
                    pro += data[o].total * (data[o].roit/100);
                    lo += data[o].total * (1-data[o].roit/100);
                   
                }
            	var profit = Math.round(pro)/(Math.round(lo)+Math.round(pro));
            	var loss = 1-profit;
            	profit = (profit*100).toFixed(2);
            	loss = (loss*100).toFixed(2);
            	Morris.Donut({
                    element: 'browser-usage',
                    data: [
                      
                      {label: "亏", value: Math.round(lo)},
                      {label: "盈", value: Math.round(pro)},
                     
                    ],
                    colors: [ '#76EE00','#ff0000']
                  });
            	var x = document.getElementById("profit"); 
            	var y = document.getElementById("loss");
            	x.innerHTML = profit.toString()+"%";
            	y.innerHTML = loss.toString()+"%";
            	//console.log(x.innerHTML); 
            	//console.log(y.html); 
            } ,
            error: function(){
                
            }         
       });
      
      

      $('#browser-usage').find("path[stroke='#ffffff']").attr('stroke', 'rgba(0,0,0,0)');

      //sparkline charts
      $('#projectbar1').sparkline('html', {type: 'bar', barColor: '#22beef', barWidth: 4, height: 20});
      $('#projectbar2').sparkline('html', {type: 'bar', barColor: '#cd97eb', barWidth: 4, height: 20});
      $('#projectbar3').sparkline('html', {type: 'bar', barColor: '#a2d200', barWidth: 4, height: 20});
      $('#projectbar4').sparkline('html', {type: 'bar', barColor: '#ffc100', barWidth: 4, height: 20});
      $('#projectbar5').sparkline('html', {type: 'bar', barColor: '#ff4a43', barWidth: 4, height: 20});
      $('#projectbar6').sparkline('html', {type: 'bar', barColor: '#a2d200', barWidth: 4, height: 20});

      // sortable table
      $('.table.table-sortable th.sortable').click(function() {
        var o = $(this).hasClass('sort-asc') ? 'sort-desc' : 'sort-asc';
        $('th.sortable').removeClass('sort-asc').removeClass('sort-desc');
        $(this).addClass(o);
      });

      //todo's
      $('#todolist li label').click(function() {
        $(this).toggleClass('done');
      });

      // Initialize tabDrop
      $('.tabdrop').tabdrop({text: '<i class="fa fa-th-list"></i>'});

      //load wysiwyg editor
      $('#quick-message-content').summernote({
        toolbar: [
          //['style', ['style']], // no style button
          ['style', ['bold', 'italic', 'underline', 'clear']],
          ['fontsize', ['fontsize']],
          ['color', ['color']],
          ['para', ['ul', 'ol', 'paragraph']],
          ['height', ['height']],
          //['insert', ['picture', 'link']], // no insert buttons
          //['table', ['table']], // no table button
          //['help', ['help']] //no help button
        ],
        height: 143   //set editable area's height
      });

      //multiselect input
      $(".chosen-select").chosen({disable_search_threshold: 10});
      
    })
      
    </script>
  </body>
</html>
      
